---
alwaysApply: true
---

# 项目规则（强制约束）

## 一、工程变更事项
- 每次变更后，更新 `项目结构.md`：记录目录结构变更 + 本次变更点

---

## 2、禁止事项

### 2.1【技术栈】

| 禁止 | 正确做法 |
|------|----------|
| ❌ 使用 YAML 配置 | 必须使用 `application.properties` |
| ❌ 数据库分库分表 | 单库单表即可 |
| ❌ 过度优化性能 | 优先保证可维护性/清晰性/工程质量 |
| ❌ 使用未指定的中间件 | 若 PRD 未指定（如 Redis），必须标注【假设】 |
| ❌ 使用lambda表达式 | Java8的基础标准语法 |

### 2.2【工程结构】

| 禁止 | 正确做法 |
|------|----------|
| ❌ 循环依赖 | 模块间禁止循环依赖 |
| ❌ 污染领域模型 | DTO/PO/VO 边界清晰，不能将外部模型渗透到 Domain 层 |
| ❌ Controller 直接调用 Mapper | 必须经过 Application Service → Repository |
| ❌ Domain 依赖 Infrastructure | 领域层不能引用持久化类（PO、Mapper） |
| ❌ 跨上下文直接引用聚合根 | 必须通过 ACL（防腐层）访问 |

---

## 3. 开发流程约定

### 3.1 任务拆解规则
- **拆解**: 大需求必须先拆成可执行小步骤。
- **单一职责**: 每一步只解决一个明确问题。
- **避免堆砌**: 不允许“一步到位生成大量代码”。

### 3.2 推荐节奏
1. **明确目标**: (功能 / 组件 / 逻辑)
2. **设计结构**: (文件路径 + 职责)
3. **生成代码**: 实现代码。
4. **验证说明**: 给出运行/验证说明。

## 4. 代码生成规范

### 4.1 输出要求
- **路径**: 必须说明新增/修改的文件路径。
- **可运行**: 代码需可直接粘贴运行。
- **相关性**: 禁止输出与当前任务无关的代码。

## 5. 架构与组织原则
- **解耦**: 业务逻辑之间不能存在大量耦合。
- **优先级**: 可读性 > 复用性 > 性能。